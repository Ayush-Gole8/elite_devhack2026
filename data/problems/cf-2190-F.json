{
  "title": "Xor Product",
  "slug": "cf-2190-F",
  "difficulty": "Hard",
  "tags": [
    "bitmasks",
    "dp"
  ],
  "time_limit_ms": 2000,
  "memory_limit_kb": 256000,
  "description": "For non-negative integers ğ‘¥,ğ‘¦ and a positive integer ğ‘˜, let ğ‘†(ğ‘¥,ğ‘¦,ğ‘˜)\n be the set of values (ğ‘¥+ğ‘–)âŠ•(ğ‘¦+ğ‘—)(ğ‘¥+ğ‘–)\nâŠ•\n(ğ‘¦+ğ‘—)\n for all 0â‰¤ğ‘–,ğ‘—<ğ‘˜0â‰¤ğ‘–,ğ‘—\n<\nğ‘˜. Formally:\nğ‘†(ğ‘¥,ğ‘¦,ğ‘˜)={(ğ‘¥+ğ‘–)âŠ•(ğ‘¦+ğ‘—)âˆ£0â‰¤ğ‘–,ğ‘—<ğ‘˜}\nğ‘†(ğ‘¥,ğ‘¦,ğ‘˜)\n=\n{\n(ğ‘¥+ğ‘–)\nâŠ•\n(ğ‘¦+ğ‘—)\nâˆ£\n0â‰¤ğ‘–,ğ‘—\n< ğ‘˜ }\nwhere âŠ•\nâŠ•\n denotes the bitwise XOR operation.\n\nDefine ğ‘“(ğ‘¥,ğ‘˜)\n as the maximum size of ğ‘†(ğ‘¥,ğ‘¦,ğ‘˜)\n over all non-negative integers ğ‘¦ (that is, ğ‘¦â‰¥0).\n\nYou are given integers ğ‘¥ and ğ‘˜. Compute ğ‘“(ğ‘¥,ğ‘˜)\n.",
  "input_format": "Each test contains multiple test cases. The first line contains the number of test cases ğ‘¡ (1â‰¤ğ‘¡â‰¤10^4). The description of the test cases follows.\n\nEach of the next ğ‘¡ lines contains two integers ğ‘¥ and ğ‘˜ (1â‰¤ğ‘¥,ğ‘˜â‰¤10^17).",
  "output_format": "For each test case, output a single integerÂ â€” the value of ğ‘“(ğ‘¥,ğ‘˜)\n.",
  "constraints": "In the first example, since ğ‘˜=1, the set ğ‘† will always contain exactly one element regardless of ğ‘¦. For instance, if we pick ğ‘¦=69, we have ğ‘†(67,69,1)={67âŠ•69}={6}\nğ‘†(67,69,1)\n=\n{\n67\nâŠ•\n69\n}\n=\n{\n6\n}\n, so |ğ‘†(ğ‘¥,ğ‘¦,ğ‘˜)|=1|ğ‘†(ğ‘¥,ğ‘¦,ğ‘˜)|\n=1.\n\nIn the second example, we have ğ‘¥=7 and ğ‘˜=3. The optimal choice is ğ‘¦=8. The values of (ğ‘¥+ğ‘–)âŠ•(ğ‘¦+ğ‘—)(ğ‘¥+ğ‘–)\nâŠ•\n(ğ‘¦+ğ‘—)\n are:\n[7âŠ•8,7âŠ•9,7âŠ•10,8âŠ•8,8âŠ•9,8âŠ•10,9âŠ•8,9âŠ•9,9âŠ•10]\n[\n7\nâŠ•\n8,7\nâŠ•\n9,7\nâŠ•\n10,8\nâŠ•\n8,8\nâŠ•\n9,8\nâŠ•\n10,9\nâŠ•\n8,9\nâŠ•\n9,9\nâŠ•\n10\n]\nwhich simplifies to [15,14,13,0,1,2,1,0,3]\n[\n15,14,13,0,1,2,1,0,3\n]\n. The set of distinct values is ğ‘†(7,8,3)={0,1,2,3,14,15}\nğ‘†(7,8,3)\n=\n{\n0,1,2,3,14,15\n}\n, so the size is 7. It can be shown that no other ğ‘¦ yields a larger size. However, the choice of ğ‘¦ matters; for example, if you chose ğ‘¦=22, you would get ğ‘†(7,22,3)={16,17,30,31}\nğ‘†(7,22,3)\n=\n{\n16,17,30,31\n}\n with size 4, which is suboptimal.\n\nIn the sixth example, after countless calculations, we managed to figure out that the optimal ğ‘¦ is 278302368699121665, which gives an answer of 398158383604301822. The proof is left to the reader as a trivial exercise.",
  "test_cases": [
    {
      "input": "6\n67 1\n7 3\n100 12\n1 1043\n1526 1043\n88946092640567295 100000000000000000",
      "output": "1\n7\n32\n3128\n4167\n398158383604301822",
      "is_sample": true
    }
  ],
  "patterns": [
    "bit-manipulation",
    "dp"
  ]
}