{
  "title": "Maximize Determinant",
  "slug": "cf-2190-G",
  "difficulty": "Hard",
  "tags": [
    "graphs"
  ],
  "time_limit_ms": 2000,
  "memory_limit_kb": 256000,
  "description": "An \nğ‘›Ã—ğ‘›\nğ‘›\nÃ—\nğ‘›\n matrix \nğµ\nğµ\n is called an interval matrix if for each row \nğ‘–\nğ‘–\n, there exists a contiguous range of columns \n[\nğ‘™\nğ‘–\n,\nğ‘Ÿ\nğ‘–\n]\n[\nğ‘™\nğ‘–\n,\nğ‘Ÿ\nğ‘–\n]\n (\n1â‰¤\nğ‘™\nğ‘–\nâ‰¤\nğ‘Ÿ\nğ‘–\nâ‰¤ğ‘›\n1\nâ‰¤\nğ‘™\nğ‘–\nâ‰¤\nğ‘Ÿ\nğ‘–\nâ‰¤\nğ‘›\n) filled with ones, while all other elements in the row are zero. Formally, \nğµ\nğ‘–,ğ‘—\n=1\nğµ\nğ‘–\n,\nğ‘—\n=\n1\n if \nğ‘™\nğ‘–\nâ‰¤ğ‘—â‰¤\nğ‘Ÿ\nğ‘–\nğ‘™\nğ‘–\nâ‰¤\nğ‘—\nâ‰¤\nğ‘Ÿ\nğ‘–\n, and \nğµ\nğ‘–,ğ‘—\n=0\nğµ\nğ‘–\n,\nğ‘—\n=\n0\n otherwise.\n\nYou are given an integer \nğ‘›\nğ‘›\n and an initial interval matrix \nğ´\nğ´\n, described by \nğ‘›\nğ‘›\n triples \n(\nğ‘™\nğ‘–\n,\nğ‘Ÿ\nğ‘–\n,\nğ‘\nğ‘–\n)\n(\nğ‘™\nğ‘–\n,\nğ‘Ÿ\nğ‘–\n,\nğ‘\nğ‘–\n)\n. The \nğ‘–\nğ‘–\n-th row of \nğ´\nğ´\n corresponds to the interval \n[\nğ‘™\nğ‘–\n,\nğ‘Ÿ\nğ‘–\n]\n[\nğ‘™\nğ‘–\n,\nğ‘Ÿ\nğ‘–\n]\n, and \nğ‘\nğ‘–\nğ‘\nğ‘–\n is the cost associated with modifying this row.\n\nLet \nîˆ¿\nğ‘†\n be the set of all possible \nğ‘›Ã—ğ‘›\nğ‘›\nÃ—\nğ‘›\n interval matrices. We define \nğ‘‹\nğ‘‹\n as the maximum possible determinant among them:\nğ‘‹=\nmax\nğµâˆˆîˆ¿\ndet(ğµ).\nğ‘‹\n=\nmax\nğµ\nâˆˆ\nğ‘†\ndet\nâ¡\n(\nğµ\n)\n.\n(Note that \n|îˆ¿|=\n(\nğ‘›(ğ‘›+1)\n2\n)\nğ‘›\n|\nğ‘†\n|\n=\n(\nğ‘›\n(\nğ‘›\n+\n1\n)\n2\n)\nğ‘›\n, as each row can be any valid interval)\n\nYour goal is to transform \nğ´\nğ´\n into a matrix \nğ´\nâ€²\nğ´\nâ€²\n such that \ndet(\nğ´\nâ€²\n)=ğ‘‹\ndet\nâ¡\n(\nğ´\nâ€²\n)\n=\nğ‘‹\n. To achieve this, you can perform the following operation any number of times:\n\nChoose a row index \nğ‘–\nğ‘–\n (\n1â‰¤ğ‘–â‰¤ğ‘›\n1\nâ‰¤\nğ‘–\nâ‰¤\nğ‘›\n) and a new valid interval \n[ğ¿,ğ‘…]\n[\nğ¿\n,\nğ‘…\n]\n (\n1â‰¤ğ¿â‰¤ğ‘…â‰¤ğ‘›\n1\nâ‰¤\nğ¿\nâ‰¤\nğ‘…\nâ‰¤\nğ‘›\n).\nReplace the current interval of the \nğ‘–\nğ‘–\n-th row with \n[ğ¿,ğ‘…]\n[\nğ¿\n,\nğ‘…\n]\n.\nThe cost of this operation is \nğ‘\nğ‘–\nğ‘\nğ‘–\n.\n\nFind the minimum total cost required to make the determinant of the matrix equal to \nğ‘‹\nğ‘‹\n.",
  "input_format": "Input\n\nEach test contains multiple test cases. The first line contains the number of test cases \nğ‘¡\nğ‘¡\n (\n1â‰¤ğ‘¡â‰¤5â‹…\n10\n4\n1\nâ‰¤\nğ‘¡\nâ‰¤\n5\nâ‹…\n10\n4\n). The description of the test cases follows.\n\nThe first line of each test case contains a single integer \nğ‘›\nğ‘›\n (\n1â‰¤ğ‘›â‰¤\n10\n6\n1\nâ‰¤\nğ‘›\nâ‰¤\n10\n6\n)Â â€” the size of the matrix.\n\nThe next \nğ‘›\nğ‘›\n lines describe the rows of the matrix \nğ´\nğ´\n. The \nğ‘–\nğ‘–\n-th of these lines contains three integers \nğ‘™\nğ‘–\nğ‘™\nğ‘–\n, \nğ‘Ÿ\nğ‘–\nğ‘Ÿ\nğ‘–\n, and \nğ‘\nğ‘–\nğ‘\nğ‘–\n (\n1â‰¤\nğ‘™\nğ‘–\nâ‰¤\nğ‘Ÿ\nğ‘–\nâ‰¤ğ‘›\n1\nâ‰¤\nğ‘™\nğ‘–\nâ‰¤\nğ‘Ÿ\nğ‘–\nâ‰¤\nğ‘›\n, \n1â‰¤\nğ‘\nğ‘–\nâ‰¤\n10\n9\n1\nâ‰¤\nğ‘\nğ‘–\nâ‰¤\n10\n9\n)Â â€” the interval boundaries and the cost of modifying the \nğ‘–\nğ‘–\n-th row.\n\nIt is guaranteed that the sum of \nğ‘›\nğ‘›\n over all test cases does not exceed \n10\n6\n10\n6\n.",
  "output_format": "Output\n\nFor each test case, print a single integerÂ â€” the minimum total cost required to make \ndet(ğ´)=ğ‘‹\ndet\nâ¡\n(\nğ´\n)\n=\nğ‘‹\n.",
  "constraints": "Note\n\nIn the first example, \nğ‘›=2\nğ‘›\n=\n2\n and it can be shown that \nğ‘‹=1\nğ‘‹\n=\n1\n. The matrix is \nğ´=[\n1\n0\n0\n1\n]\nğ´\n=\n[\n1\n\t\n0\n\n\n0\n\t\n1\n]\n. Since \ndet(ğ´)=1\ndet\nâ¡\n(\nğ´\n)\n=\n1\n, no operations are needed.\n\nIn the second example, \nğ‘‹\nğ‘‹\n is still \n1\n1\n, but the matrix is \nğ´=[\n0\n1\n1\n0\n]\nğ´\n=\n[\n0\n\t\n1\n\n\n1\n\t\n0\n]\n. The determinant is \nâˆ’1\nâˆ’\n1\n, so we must transform the matrix.\n\nIt can be proven that it is impossible to reach a determinant of \n1\n1\n with a single operation. Therefore, we must modify both rows. One possible sequence of operations is:\n\n[\n0\n1\n1\n0\n]\nâˆ’\nâ†’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nğ‘–=2,ğ¿=2,ğ‘…=2\n[\n0\n0\n1\n1\n]\nâˆ’\nâ†’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nâˆ’\nğ‘–=1,ğ¿=1,ğ‘…=2\n[\n1\n0\n1\n1\n]\n[\n0\n\t\n1\n\n\n1\n\t\n0\n]\nâ†’\nğ‘–\n=\n2\n,\nğ¿\n=\n2\n,\nğ‘…\n=\n2\n[\n0\n\t\n1\n\n\n0\n\t\n1\n]\nâ†’\nğ‘–\n=\n1\n,\nğ¿\n=\n1\n,\nğ‘…\n=\n2\n[\n1\n\t\n1\n\n\n0\n\t\n1\n]\n\nThe final matrix has a determinant of \n1\n1\n. The total cost is \nğ‘\n2\n+\nğ‘\n1\n=1+1=2\nğ‘\n2\n+\nğ‘\n1\n=\n1\n+\n1\n=\n2\n, which is the answer.",
  "test_cases": [
    {
      "input": "6\n2\n1 1 1\n2 2 1\n2\n2 2 1\n1 1 1\n4\n1 4 4\n2 2 3\n4 4 6\n2 4 5\n6\n1 6 1\n5 5 1000\n2 4 1000\n6 6 1000\n3 3 1000\n4 4 1000\n5\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n5\n1 4 15\n4 4 14\n2 3 16\n2 2 14\n3 5 15",
      "output": "0\n2\n3\n1000\n4000000000\n14",
      "is_sample": true
    }
  ]
}
