{
  "title": "Maximize Determinant",
  "slug": "cf-2190-G",
  "difficulty": "Hard",
  "tags": [
    "graphs"
  ],
  "time_limit_ms": 2000,
  "memory_limit_kb": 256000,
  "description": "An ğ‘›Ã—ğ‘›Ã—ğ‘› matrix ğµ is called an interval matrix if for each row ğ‘–, there exists a contiguous range of columns [\nğ‘™ğ‘–,ğ‘Ÿğ‘–\n]\n[\nğ‘™ğ‘–,ğ‘Ÿğ‘–\n]\n (1â‰¤ğ‘™ğ‘–â‰¤ğ‘Ÿğ‘–â‰¤ğ‘›) filled with ones, while all other elements in the row are zero. Formally, ğµğ‘–,ğ‘—=1 if ğ‘™ğ‘–â‰¤ğ‘—â‰¤ğ‘Ÿğ‘–, and ğµğ‘–,ğ‘—=0 otherwise.\n\nYou are given an integer ğ‘› and an initial interval matrix ğ´, described by ğ‘› triples (ğ‘™ğ‘–,ğ‘Ÿğ‘–,ğ‘ğ‘–)\n. The ğ‘–-th row of ğ´ corresponds to the interval [\nğ‘™ğ‘–,ğ‘Ÿğ‘–\n]\n[\nğ‘™ğ‘–,ğ‘Ÿğ‘–\n]\n, and ğ‘ğ‘– is the cost associated with modifying this row.\n\nLet îˆ¿\nğ‘† be the set of all possible ğ‘›Ã—ğ‘›Ã—ğ‘› interval matrices. We define ğ‘‹ as the maximum possible determinant among them:\nğ‘‹=\nmax\nğµâˆˆîˆ¿\ndet(ğµ).ğ‘‹=\nmax ğµ âˆˆ ğ‘† det\nâ¡\n(ğµ)\n.\n(Note that |îˆ¿|=\n(ğ‘›(ğ‘›+1)2)ğ‘›|ğ‘†|\n=\n(ğ‘›(ğ‘›+1)2)ğ‘›, as each row can be any valid interval)\n\nYour goal is to transform ğ´ into a matrix ğ´\nâ€² ğ´ â€²\n such that det(ğ´\nâ€²\n)=ğ‘‹\ndet\nâ¡\n(ğ´\nâ€²\n)\n=ğ‘‹. To achieve this, you can perform the following operation any number of times:\n\nChoose a row index ğ‘– (1â‰¤ğ‘–â‰¤ğ‘›) and a new valid interval [ğ¿,ğ‘…]\n[\nğ¿,ğ‘…\n]\n (1â‰¤ğ¿â‰¤ğ‘…â‰¤ğ‘›).\nReplace the current interval of the ğ‘–-th row with [ğ¿,ğ‘…]\n[\nğ¿,ğ‘…\n]\n.\nThe cost of this operation is ğ‘ğ‘–.\n\nFind the minimum total cost required to make the determinant of the matrix equal to ğ‘‹.",
  "input_format": "Each test contains multiple test cases. The first line contains the number of test cases ğ‘¡ (1â‰¤ğ‘¡â‰¤5â‹…10^4). The description of the test cases follows.\n\nThe first line of each test case contains a single integer ğ‘› (1â‰¤ğ‘›â‰¤10^6)Â â€” the size of the matrix.\n\nThe next ğ‘› lines describe the rows of the matrix ğ´. The ğ‘–-th of these lines contains three integers ğ‘™ğ‘–, ğ‘Ÿğ‘–, and ğ‘ğ‘– (1â‰¤ğ‘™ğ‘–â‰¤ğ‘Ÿğ‘–â‰¤ğ‘›, 1â‰¤ğ‘ğ‘–â‰¤10^9)Â â€” the interval boundaries and the cost of modifying the ğ‘–-th row.\n\nIt is guaranteed that the sum of ğ‘› over all test cases does not exceed 10^6.",
  "output_format": "For each test case, print a single integerÂ â€” the minimum total cost required to make det(ğ´)=ğ‘‹\ndet\nâ¡\n(ğ´)\n=ğ‘‹.",
  "constraints": "In the first example, ğ‘›=2 and it can be shown that ğ‘‹=1. The matrix is ğ´=[\n100^1\n]\nğ´=\n[\n1\n\t\n0\n\n\n0\n\t\n1\n]\n. Since det(ğ´)=1\ndet\nâ¡\n(ğ´)\n=1, no operations are needed.\n\nIn the second example, ğ‘‹ is still 1, but the matrix is ğ´=[\n011^0\n]\nğ´=\n[\n0\n\t\n1\n\n\n1\n\t\n0\n]\n. The determinant is âˆ’1\nâˆ’1, so we must transform the matrix.\n\nIt can be proven that it is impossible to reach a determinant of 1 with a single operation. Therefore, we must modify both rows. One possible sequence of operations is:\n\n[\n011^0\n]\nâˆ’\nâ†’\nâˆ’âˆ’âˆ’âˆ’ğ‘–=2,ğ¿=2,ğ‘…=2\n[\n001\n]\nâˆ’\nâ†’\nâˆ’âˆ’âˆ’âˆ’ğ‘–=1,ğ¿=1,ğ‘…=2\n[\n1^01\n]\n[\n0\n\t\n1\n\n\n1\n\t\n0\n]\nâ†’\nğ‘–=2,ğ¿=2,ğ‘…=2\n[\n0\n\t\n1\n\n\n0\n\t\n1\n]\nâ†’\nğ‘–=1,ğ¿=1,ğ‘…=2\n[\n1\n\t\n1\n\n\n0\n\t\n1\n]\n\nThe final matrix has a determinant of 1. The total cost is ğ‘2+ğ‘1=1+1=2, which is the answer.",
  "test_cases": [
    {
      "input": "6\n2\n1 1 1\n2 2 1\n2\n2 2 1\n1 1 1\n4\n1 4 4\n2 2 3\n4 4 6\n2 4 5\n6\n1 6 1\n5 5 1000\n2 4 1000\n6 6 1000\n3 3 1000\n4 4 1000\n5\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n5\n1 4 15\n4 4 14\n2 3 16\n2 2 14\n3 5 15",
      "output": "0\n2\n3\n1000\n4000000000\n14",
      "is_sample": true
    }
  ],
  "patterns": [
    "dp",
    "bit-manipulation",
    "backtracking"
  ]
}