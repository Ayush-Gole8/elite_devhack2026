{
  "title": "Maximize Determinant",
  "slug": "cf-2190-G",
  "difficulty": "Hard",
  "tags": [
    "graphs"
  ],
  "time_limit_ms": 2000,
  "memory_limit_kb": 256000,
  "description": "An ğ‘›Ã—ğ‘› ğ‘› Ã— ğ‘› matrix ğµ is called an interval matrix if for each row ğ‘– \n, there exists a contiguous range of columns [ğ‘™ ğ‘–, ğ‘Ÿ ğ‘–] [ğ‘™ ğ‘–, ğ‘Ÿ ğ‘–] (1 â‰¤ ğ‘™ ğ‘– â‰¤ ğ‘Ÿ ğ‘– â‰¤ ğ‘› 1 â‰¤ ğ‘™ ğ‘– â‰¤ ğ‘Ÿ ğ‘– â‰¤ ğ‘›) filled with ones, while all other elements in the row are zero. Formally, ğµ ğ‘–,ğ‘— =1 ğµ ğ‘–, ğ‘— = 1 if ğ‘™ ğ‘– â‰¤ ğ‘— â‰¤ ğ‘Ÿ ğ‘– ğ‘™ ğ‘– â‰¤ ğ‘— â‰¤ ğ‘Ÿ ğ‘–, and ğµ ğ‘–,ğ‘— =0 ğµ ğ‘–, ğ‘— = 0 otherwise. \nYou are given an integer ğ‘› \n and an initial interval matrix ğ´, described by ğ‘› triples (ğ‘™ ğ‘–, ğ‘Ÿ ğ‘–, ğ‘ ğ‘–) (ğ‘™ ğ‘–, ğ‘Ÿ ğ‘–, ğ‘ ğ‘–). The ğ‘– -th row of ğ´ \n corresponds to the interval [ğ‘™ ğ‘–, ğ‘Ÿ ğ‘–] [ğ‘™ ğ‘–, ğ‘Ÿ ğ‘–], and ğ‘ ğ‘– ğ‘ ğ‘– is the cost associated with modifying this row.\n Let îˆ¿ ğ‘† be the set of all possible ğ‘›Ã—ğ‘› ğ‘› Ã— ğ‘›\n interval matrices. We define ğ‘‹ \n as the maximum possible determinant among them: ğ‘‹= max ğµâˆˆîˆ¿ det(ğµ). ğ‘‹ = max ğµ âˆˆ ğ‘† det â¡ (ğµ). (Note that |îˆ¿|= (ğ‘›(ğ‘›+1) 2) ğ‘› | ğ‘† | = (ğ‘› (ğ‘› + 1) 2) ğ‘›, as each row can be any valid interval)\n\nYour goal is to transform ğ´ into a matrix ğ´ â€² ğ´ â€² such that det(ğ´ â€²)=ğ‘‹ det â¡ (ğ´ â€²) = ğ‘‹\n. To achieve this, you can perform the following operation any number of times:\n Choose a row index ğ‘– (1 â‰¤ ğ‘– â‰¤ ğ‘› 1 â‰¤ ğ‘– â‰¤ ğ‘›\n) and a new valid interval [ğ¿,ğ‘…] [ğ¿, ğ‘…] (1 â‰¤ ğ¿ â‰¤ ğ‘… â‰¤ ğ‘› 1 â‰¤ ğ¿ â‰¤ ğ‘… â‰¤ ğ‘›).\nReplace the current interval of the ğ‘– -th row with [ğ¿,ğ‘…] [ğ¿, ğ‘…].\nThe cost of this operation is ğ‘ ğ‘– ğ‘ ğ‘–. \nFind the minimum total cost required to make the determinant of the matrix equal to ğ‘‹ \n.",
  "input_format": "Input\n\nEach test contains multiple test cases. The first line contains the number of test cases ğ‘¡ (1 â‰¤ ğ‘¡ â‰¤ 5â‹… 10 4 1 â‰¤ ğ‘¡ â‰¤ 5 â‹… 10 4\n). The description of the test cases follows.\n\nThe first line of each test case contains a single integer ğ‘› (1 â‰¤ ğ‘› â‰¤ 10 6 1 â‰¤ ğ‘› â‰¤ 10 6\n)Â â€” the size of the matrix.\n The next ğ‘› lines describe the rows of the matrix ğ´. The ğ‘– -th of these lines contains three integers ğ‘™ ğ‘– ğ‘™ ğ‘–, ğ‘Ÿ ğ‘– ğ‘Ÿ ğ‘–, and ğ‘ ğ‘– ğ‘ ğ‘– (1 â‰¤ ğ‘™ ğ‘– â‰¤ ğ‘Ÿ ğ‘– â‰¤ ğ‘› 1 â‰¤ ğ‘™ ğ‘– â‰¤ ğ‘Ÿ ğ‘– â‰¤ ğ‘›, 1 â‰¤ ğ‘ ğ‘– â‰¤ 10 9 1 â‰¤ ğ‘ ğ‘– â‰¤ 10 9)Â â€” the interval boundaries and the cost of modifying the ğ‘– -th row. \nIt is guaranteed that the sum of ğ‘› \n over all test cases does not exceed 10 6 10 6\n.",
  "output_format": "Output\n\nFor each test case, print a single integerÂ â€” the minimum total cost required to make det(ğ´)=ğ‘‹ det â¡ (ğ´) = ğ‘‹\n.",
  "constraints": "Note\n In the first example, ğ‘›=2 ğ‘› = 2 and it can be shown that ğ‘‹=1 ğ‘‹ = 1. The matrix is ğ´=[1 0 1] ğ´ = [1 \t 0 0 \t 1]. Since det(ğ´)=1 det â¡ (ğ´) = 1, no operations are needed.\n\nIn the second example, ğ‘‹ is still 1, but the matrix is ğ´=[0 1 0] ğ´ = [0 \t 1\n 1 \t 0]. The determinant is -1 - 1\n, so we must transform the matrix.\n\nIt can be proven that it is impossible to reach a determinant of 1 \n with a single operation. Therefore, we must modify both rows. One possible sequence of operations is:\n [0 1 0] - â†’ - - - - - ğ‘–=2,ğ¿=2,ğ‘…=2 [0 1] - â†’ - - - - - ğ‘–=1,ğ¿=1,ğ‘…=2 [1 0 1] [0 \t 1\n 1 \t 0] â†’ ğ‘– = 2, ğ¿ = 2, ğ‘… = 2 [0 \t 1\n 0 \t 1] â†’ ğ‘– = 1, ğ¿ = 1, ğ‘… = 2 [1 \t 1 0 \t 1] \nThe final matrix has a determinant of 1. The total cost is ğ‘ 2 + ğ‘ 1 =1+1=2 ğ‘ 2 + ğ‘ 1 = 1 + 1 = 2\n, which is the answer.",
  "test_cases": [
    {
      "input": "6\n2\n1 1 1\n2 2 1\n2\n2 2 1\n1 1 1\n4\n1 4 4\n2 2 3\n4 4 6\n2 4 5\n6\n1 6 1\n5 5 1000\n2 4 1000\n6 6 1000\n3 3 1000\n4 4 1000\n5\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n1 1 1000000000\n5\n1 4 15\n4 4 14\n2 3 16\n2 2 14\n3 5 15",
      "output": "0\n2\n3\n1000\n4000000000\n14",
      "is_sample": true
    }
  ]
}